(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-144da6b1"],{1119:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjU2RURFQTdFNTUxMUVCQkU0MEQ2QjY3ODJCNTFBMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjU2RURFQjdFNTUxMUVCQkU0MEQ2QjY3ODJCNTFBMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZGNTZFREU4N0U1NTExRUJCRTQwRDZCNjc4MkI1MUExIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZGNTZFREU5N0U1NTExRUJCRTQwRDZCNjc4MkI1MUExIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CKSWnQAAAORJREFUeNrck71qAkEURs+dHRNZY5ciWAR8Gp8gb2CXws48hZBSrC19AJ9CkFRBUMQirQTXn3XdG0cRXP8IrpUHZgbud+8pZhjR7483hE+UPPuY3ATvq0pXmkwKkAkTMWpBxpsl2qv8sHp6QaJkU8ZAEEPnd8hyfVo5kJglZl5DZnXRQbnP9LWIDZJNbkbWotEcZtEJictliv+Ys6i3QGKOcCVXL2a3wkN0s/lYr205x24wjE9LdoRRyfIf9GIaGNIT30LC3UnE3YukcXgGfXiGVRqJb4nyDczi/brHdX9MW38CDADpSkE3OnFZGAAAAABJRU5ErkJggg=="},"1d89":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGQ0FERTkwQzdFNTUxMUVCQjg2NEI3MzFGQTEyRDgyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGQ0FERTkwRDdFNTUxMUVCQjg2NEI3MzFGQTEyRDgyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDQURFOTBBN0U1NTExRUJCODY0QjczMUZBMTJEODJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZDQURFOTBCN0U1NTExRUJCODY0QjczMUZBMTJEODJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+L5jktAAAAhRJREFUeNqUUztrVUEQntnd+0pEuQm+QFEkYCOkERubEPHRqMRAGgux1EaENBaCgRQGsUlhtBHEMo0/QNTSwsIiaQQbIYioN0ZEk+zZGb8559zEG696HZh9nZ1v5vtmD5/b//51w8lcpvyAmM4S6SxhoL8bk/KMMt33rOfXk5sONZ+Go/AVZt2LC6fhB6kXY73GRHuS0omqT0d4/MDSZxwPIMe/6/i9rnZMy2HYhs1LTm4K84ueQZReFTH8zDAChioO76nqY2Q4hf3IRkIu0qlyN6iHojoHiiP4+tyAIjm6qCR1Jj7zi5rfYgxXyelYxacxNR7aQWucvGRYITlH06iFw2ZZ7oY51uXVGAaSeupz2SX1Mu2c7lPhzWubGi2bRnUSesOJ53G42L4jyq7is+01n1GW3KMsusNr0U+J0ruS6NsyZsEwDKiBzV0VmsD65pamiEMWVAeG/H11rXIrE/c01y7XlSawumEYBiSIOK5ej2Ie7WwMyIMatAOYDPfX158EL5fFxGc6pi6POWkYptEXLHZsbQmqaEGjQWhU7QvxtrJcZ/5jB1esa+Yr8E/wZv44C40agfVO8PGCOjmE9wKQjuCv8I9lTM2o9YPDDDQaooJv2xo+pElfgnR5kLMAHgL2pGGE8ngw7x7Rzo673Wm0rVnG7M4bA43+9w/ralbREnwXvAK3l/qjx9ha/nsVMR9+CjAA2BrNuk95JbEAAAAASUVORK5CYII="},"287c":function(t,e,i){},"313e":function(t,e,i){t.exports=i("9766")(1706)},3605:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMDlFMkVCQzhFQzExMUVCQkI5Q0ZERUE4RUVCMjgwMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMDlFMkVCRDhFQzExMUVCQkI5Q0ZERUE4RUVCMjgwMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjIwOUUyRUJBOEVDMTExRUJCQjlDRkRFQThFRUIyODAwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIwOUUyRUJCOEVDMTExRUJCQjlDRkRFQThFRUIyODAwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AVXlcgAAAg5JREFUeNqcUr9rFEEYffPjdr1bz/MuxiuUA/GIxkJEbIIQEEELCzstbAStFLSxSKOlkMJaC/MvWATEQqxDBP+CICJqEe7C/di729vbnRm/bxLPKJIEPxh2mXnvfe97M2LpaedxjuShhCoAcPhHaa0xHIxG7VbnntJ6Hc5BG6TLRAqxVwl4zTzL1qSUC7TWpYBoYb8iIjWBMVZM0nTNGLOgaTvfl2gdlJLeMkkIm5sP+peRvSrPDYKwgBONOhyJQIiixgGLrQZBsN3GIT4wkYtmm/5L/GdNOyoFDIcOvb7xtqbKJF2rKSjKP0ksSiVJI+4Q+bDXt4ho886tCipHJIxlMYH2Vo7VtwNkuUXjpMYocV7YE9OJ8+QH96tevd3OKQjhQefOlnCmGRARqB9XeP5iCxnhPXE0crhwPkSjobH0rIVv3zNEkUQvNpifC/Hk0Qzi2HqLIQmmY7cdjti5yW7XokBSs8c0alWF5qkAfRrh9t0fePm64zEFhd8z8p1qLbzdeGBpObImkGUOxaLEzRtllCOBMXVyu1PVpLK5aXC0onBlMcLG5wkOk9VO1+DSxSKuX42mKY/TXeEw6MvXCd6sxrhGoMXLJd+dAfx9tdLxruZOBz5tDo6JM+yZZ3r3foCPnxIcCoUn8T4ny3dricBn9VkNoVFm4gaBmqxcJTLPkSTujwfAI/z1buOfAgwAQ1rTnXW4b7IAAAAASUVORK5CYII="},4427:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.$t("add"),visible:t.modal_video,"confirm-loading":t.confirmLoading,"ok-text":[t.$t("next"),t.$t("scan")][t.step],"mask-closabl":"false","cancel-text":[t.$t("cancel"),t.$t("back")][t.step],wrapClassName:"my-modal my-add"},on:{cancel:t.toCancel,ok:t.toNext}},[a("div",{staticClass:"modal"},[a("a-spin",{attrs:{spinning:t.spinning}},[a("header",[a("div",{class:["selected","normal"][t.step]},[t._v(t._s(t.$t("one")))]),a("div",{class:["normal","selected"][t.step]},[t._v(t._s(t.$t("two")))])]),a("main",{directives:[{name:"show",rawName:"v-show",value:0==t.step,expression:"step==0"}],staticClass:"step1"},[a("div",{staticClass:"tip"},[t._v(t._s(t.$t("choose")))]),a("div",{staticClass:"content"},[a("a-tree",{attrs:{"tree-data":t.treeData,"show-icon":"",defaultExpandedKeys:t._f("getKey")(t.currentAdd),defaultSelectedKeys:t._f("getKey")(t.currentAdd)},on:{select:t.onSelect}},[a("img",{attrs:{slot:"disk",src:i("1119")},slot:"disk"}),a("img",{attrs:{slot:"folder",src:i("1119")},slot:"folder"}),a("img",{attrs:{slot:"file",src:i("1d89")},slot:"file"})])],1),t.currentAdd.title?a("div",{staticClass:"bottom"},[t._v(t._s(t.$t("selected"))+" "+t._s(t.currentAdd.title))]):t._e()]),a("main",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step==1"}],staticClass:"step2"},[a("section",{staticClass:"left"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("list"))+" (1)")]),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("img",{attrs:{src:i("3605")}}),a("div",{staticClass:"content"},[t._v(" "+t._s(t.currentAdd.title)+" ")])])])]),a("div",{staticClass:"space"}),a("section",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("data")))]),a("div",{staticClass:"scroll"},[a("div",{staticClass:"wrap"},[a("a-form",{staticClass:"add videoForm",attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:19}},on:{submit:t.toNext}},[a("a-form-item",{attrs:{label:t.$t("date"),colon:!1}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.date,expression:"decorator.date"}],attrs:{valueFormat:"YYYY-MM-DD",defaultValue:t.date}})],1),a("a-form-item",{attrs:{label:t.$t("video_start_mileage"),colon:!1}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.video_start_mileage,expression:"decorator.video_start_mileage"}],staticStyle:{width:"194px"},attrs:{size:t.size}})],1),a("a-form-item",{attrs:{label:t.$t("video_end_mileage"),colon:!1}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.video_end_mileage,expression:"decorator.video_end_mileage"}],staticStyle:{width:"194px"},attrs:{size:t.size}})],1),a("a-form-item",{attrs:{label:t.$t("number"),colon:!1}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.car_id,expression:"decorator.car_id"}],staticStyle:{width:"194px"},attrs:{size:t.size},on:{change:t.afterStation}},t._l(t.base.cars,(function(e){return a("a-select-option",{key:e,attrs:{value:e.id}},[t._v(" "+t._s(e.factory_number)+" ")])})),1)],1),a("a-form-item",{attrs:{label:t.$t("work"),colon:!1}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.work,expression:"decorator.work"}],staticStyle:{width:"194px"},attrs:{size:t.size},on:{change:t.afterWorkSection}},t._l(t.selectList.work_section,(function(e){return a("a-select-option",{key:e,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:t.$t("line"),colon:!1}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.line,expression:"decorator.line"}],staticStyle:{width:"194px"},attrs:{size:t.size},on:{change:t.afterLineName}},t._l(t.lineNameList,(function(e){return a("a-select-option",{key:e,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:t.$t("direction"),colon:!1}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.direction,expression:"decorator.direction"}],staticStyle:{width:"194px"},attrs:{size:t.size},on:{change:t.afterDirection}},t._l(t.directionList,(function(e){return a("a-select-option",{key:e,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:t.$t("area"),colon:!1}},[a("div",{staticClass:"area"},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.start,expression:"decorator.start"}],staticStyle:{width:"120px"},attrs:{size:t.size},on:{change:t.afterStation}},t._l(t.startList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1),a("span",{staticStyle:{color:"#fff",margin:"0 10px"}},[t._v("-")]),a("a-form-item",{staticStyle:{width:"95px"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator.end,expression:"decorator.end"}],staticStyle:{width:"120px"},attrs:{size:t.size},on:{change:t.afterStation}},t._l(t.endList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)]),t._l(t.stationList,(function(e,i){return a("a-form-item",{key:e.station_id,staticClass:"extra",attrs:{label:e.name,colon:!1}},[a("div",{staticClass:"station"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["running_time_data["+i+"].tracks_id",{initialValue:"正线"}],expression:"[`running_time_data[${staIndex}].tracks_id`,{initialValue:'正线'}]"}],staticStyle:{width:"105px"},attrs:{size:t.size}}),a("span",{staticStyle:{color:"#fff",margin:"0 10px"}},[t._v("-")]),a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["running_time_data["+i+"].start_time"],expression:"[`running_time_data[${staIndex}].start_time` ]"}],attrs:{"value-format":"HH:mm",format:"HH:mm"}}),a("span",{staticStyle:{color:"#fff",margin:"0 10px"}},[t._v("-")]),a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["running_time_data["+i+"].arrive_time"],expression:"[`running_time_data[${staIndex}].arrive_time`]"}],attrs:{"value-format":"HH:mm",format:"HH:mm"}})],1)])}))],2)],1),a("details",{attrs:{open:"open"},on:{click:function(e){t.expand=!t.expand}}},[a("summary",[t._v(t._s(t.$t("bad"))+"("+t._s(t.badList.length)+") "),a("a-icon",{staticClass:"down",attrs:{type:t.expand?"caret-up":"caret-down"}})],1),a("div",{staticClass:"add"},[a("div",{staticClass:"path"},t._l(t.badList,(function(e,i){return a("nav",{key:e.name,class:t.currentItem[0]==i?"sel":"",on:{click:function(e){return t.selListItem(0,i)}}},[t._v(t._s(e.name)+" "),a("a-icon",{staticClass:"icon",attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),t.removeFromList(0,i)}}})],1)})),0),a("span",{staticClass:"plus",on:{click:function(e){return t.pushIntoList(0)}}},[a("a-icon",{attrs:{type:"plus"}})],1)]),t._l(t.badList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==t.currentItem[0],expression:"index==currentItem[0]"}],key:i,staticClass:"box"},[a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("desc")))]),a("a-input",{model:{value:e.describe,callback:function(i){t.$set(e,"describe",i)},expression:"item.describe"}})],1),a("div",{staticClass:"item it2"},[a("label",[t._v(t._s(t.$t("start")))]),a("a-input",{attrs:{type:"number"},model:{value:e.start_mileage,callback:function(i){t.$set(e,"start_mileage",i)},expression:"item.start_mileage"}})],1),a("div",{staticClass:"item it2"},[a("label",[t._v(t._s(t.$t("end")))]),a("a-input",{attrs:{type:"number"},model:{value:e.end_mileage,callback:function(i){t.$set(e,"end_mileage",i)},expression:"item.end_mileage"}})],1),a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("reason")))]),a("a-input",{model:{value:e.reasons,callback:function(i){t.$set(e,"reasons",i)},expression:"item.reasons"}})],1),a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("remark")))]),a("a-input",{model:{value:e.remarks,callback:function(i){t.$set(e,"remarks",i)},expression:"item.remarks"}})],1)])}))],2),a("details",{attrs:{open:"open"},on:{click:function(e){t.expand2=!t.expand2}}},[a("summary",[t._v(t._s(t.$t("wait"))+"("+t._s(t.waitList.length)+") "),a("a-icon",{staticClass:"down",attrs:{type:t.expand2?"caret-up":"caret-down"}})],1),a("div",{staticClass:"add"},[a("div",{staticClass:"path"},t._l(t.waitList,(function(e,i){return a("nav",{key:e.name,class:t.currentItem[1]==i?"sel":"",on:{click:function(e){return t.selListItem(1,i)}}},[t._v(t._s(e.name)+" "),a("a-icon",{staticClass:"icon",attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),t.removeFromList(1,i)}}})],1)})),0),a("span",{staticClass:"plus",on:{click:function(e){return t.pushIntoList(1)}}},[a("a-icon",{attrs:{type:"plus"}})],1)]),t._l(t.waitList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==t.currentItem[1],expression:"index==currentItem[1]"}],key:i,staticClass:"box"},[a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("desc")))]),a("a-input",{model:{value:e.describe,callback:function(i){t.$set(e,"describe",i)},expression:"item.describe"}})],1),a("div",{staticClass:"item it2"},[a("label",[t._v(t._s(t.$t("start")))]),a("a-input",{model:{value:e.start_mileage,callback:function(i){t.$set(e,"start_mileage",i)},expression:"item.start_mileage"}})],1),a("div",{staticClass:"item it2"},[a("label",[t._v(t._s(t.$t("end")))]),a("a-input",{model:{value:e.end_mileage,callback:function(i){t.$set(e,"end_mileage",i)},expression:"item.end_mileage"}})],1),a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("reason")))]),a("a-input",{model:{value:e.reasons,callback:function(i){t.$set(e,"reasons",i)},expression:"item.reasons"}})],1),a("div",{staticClass:"item"},[a("label",[t._v(t._s(t.$t("remark")))]),a("a-input",{model:{value:e.remarks,callback:function(i){t.$set(e,"remarks",i)},expression:"item.remarks"}})],1)])}))],2)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step==1"}],staticClass:"tip2"},[t._v("*"+t._s(t.$t("modify")))])])],1)])},s=[],n=(i("8e6e"),i("456d"),i("20d6"),i("1c4c"),i("7f7f"),i("28a5"),i("6762"),i("2fdb"),i("ac6a"),i("5df3"),i("4f7f"),i("2909")),r=(i("7514"),i("ade3")),o=i("dde5"),c=i("ef87"),d=i("2f62");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={message:"",required:!0},h={name:"my-add",props:["data","type"],i18n:i("f7d9"),data:function(){return{spinning:!1,modal_video:!1,step:0,treeData:[],showIcon:!0,treeObj:{},source:[],currentAdd:{},form:this.$form.createForm(this,{name:"video"}),isRequire:u,date:null,decorator:{date:["date",{rules:[u]}],car_id:["car_id",{rules:[u]}],video_start_mileage:["video_start_mileage",{rules:[u]}],video_end_mileage:["video_end_mileage",{rules:[u]}],work:["work_section_category_id",{rules:[u]}],line:["line_name_category_id",{rules:[u]}],direction:["direction_category_id",{rules:[u]}],start:["start_station_id",{rules:[u]}],end:["end_station_id",{rules:[u]}]},chains:[],lineNameList:[],directionList:[],stationList:[],allList:[],startList:[],endList:[],expand:!1,expand2:!1,badList:[],waitList:[],currentItem:[0,0],msg_scan:{1:this.$t("scan1"),0:this.$t("scan0"),"-1":this.$t("scan_1"),"-2":this.$t("scan_2"),"-3":this.$t("scan_3"),"-4":this.$t("scan_4"),"-5":this.$t("scan_5"),"-6":this.$t("scan_6"),"-7":this.$t("scan_7"),"-8":this.$t("scan_8"),"-9":this.$t("scan_9"),"-10":this.$t("scan_10"),"-11":this.$t("scan_11")}}},filters:{getKey:function(t){return t?[t.key]:[]}},computed:m({},Object(d["mapState"])("form",["selectList","base","videoList","videoInfos","hurtList","tableInfos","currentDay","currentCalendar"])),mounted:function(){this.$bus.$off("addVideoFiles"),this.$bus.$on("addVideoFiles",this.toAddFiles)},methods:{getPath:function(t){var e=this.currentAdd,i="",a=[e],s=function(){var e=a.shift();i="/".concat(e.title||e.item_name)+i;var s=t.find((function(t){return t.item_id==e.parent_id}));s&&a.push(s)};while(a.length)s();return i},toNext:function(){var t=this;if(0==this.step)return!this.currentAdd.title||this.currentAdd.item_type<2?void this.$message.error(this.$t("choose2")):(this.step=1,void this.initForm());this.form.validateFields((function(e,i){e?t.$message.error(t.$t("empty")):t.postForm(i)}))},afterWorkSection:function(t){var e=this.chains;e[0]=this.base.lines.filter((function(e){return e.work_section_category_id==t})),this.chains=e;var i=Object(n["a"])(new Set(e[0].map((function(t){return t.line_name_category_id}))));if(this.lineNameList=this.selectList.line_name.filter((function(t){return i.includes(t.id)})),0==this.lineNameList.length)return this.$message.warn(this.$t("none")),void this.form.setFieldsValue({line_name_category_id:null});var a=this.lineNameList[0].id;this.form.setFieldsValue({line_name_category_id:a}),this.afterLineName(a)},afterLineName:function(t){var e=this.chains;e[1]=e[0].filter((function(e){return e.line_name_category_id==t})),this.chains=e;var i=Object(n["a"])(new Set(e[1].map((function(t){return t.direction_category_id}))));if(this.directionList=this.selectList.direction.filter((function(t){return i.includes(t.id)})),0==this.directionList.length)return this.$message.warn(this.$t("none2")),void this.form.setFieldsValue({direction_category_id:null});var a=this.directionList[0].id;this.form.setFieldsValue({direction_category_id:a}),this.afterDirection(a)},afterDirection:function(t){var e=this,i=this.chains;if(i[2]=i[1].find((function(e){return e.direction_category_id==t})),this.chains=i,!i[2]||!i[2].station_chain)return this.$message.error(this.$t("none3")),this.startList=this.endList=this.allList=this.stationList=[],void this.form.setFieldsValue({start_station_id:null,end_station_id:null});var a=i[2].station_chain.split(","),s=i[2].center_mileage_chain.split(",");if(this.$debug&&console.log("检测区间ids",a),this.$debug&&console.log("检测区间中心里程",s),this.allList=a.map((function(t,i){var a=e.base.stations.find((function(e){return e.id==t}));return a.center_mileage=s[i],a})),this.$debug&&console.log("检测区间",this.allList),this.allList.length<2)return this.$message.error(this.$t("none4")),this.startList=this.endList=this.allList=this.stationList=[],void this.form.setFieldsValue({start_station_id:null,end_station_id:null});this.startList=this.allList.slice(0,-1),this.endList=this.allList.slice(1,99),this.form.setFieldsValue({start_station_id:this.startList[0].id,end_station_id:this.endList[this.endList.length-1].id}),this.afterStation()},initForm:function(){this.form.resetFields(),this.$debug&&console.log("选中视频",this.currentAdd),this.currentAdd.path=this.getPath(this.files);var t=this.currentAdd.title||"",e=this.$moment().format("YYYY-MM-DD");e="/work"==this.$route.path?this.currentCalendar:this.currentDay.date?this.currentDay.date:e;var i=/^(GTC-)\d+$/g.exec(t);i=this.base.cars.find((function(t){return t.factory_number==i})),i=i?i.id:this.base.cars[0].id;var a=null,s=null,n=/K.+$/.exec(this.currentAdd.title);if(n){var r=n[0].split(".")[0],o=r.split("-")[0],d=r.split("-")[1];a=Object(c["c"])(o),s=Object(c["c"])(d)}var l=this.selectList.work_section[0].id;this.afterWorkSection(l),this.form.setFieldsValue({date:e,car_id:i,work_section_category_id:l,video_start_mileage:a,video_end_mileage:s}),this.currentItem[0]=0,this.currentItem[1]=0,this.badList=[],this.waitList=[],this.pushIntoList(0),this.pushIntoList(1)},postForm:function(t){var e=this;this.spinning=!0,this.$debug&&console.log("填写表单",t);var i=t.car_id,a=t.video_start_mileage,s=t.video_end_mileage,n=t.line_name_category_id,r=t.direction_category_id,d=t.start_station_id,l=t.end_station_id,m=t.running_time_data;m=m.map((function(t,i){return{station:e.stationList[i].name,tracks_id:e.getTracksId(t.tracks_id),start_time:t.start_time,arrive_time:t.arrive_time,center_mileage:e.stationList[i].center_mileage}}));var u=this.badList.filter((function(t){return t.describe&&t.start_mileage&&t.end_mileage&&t.reasons&&t.remarks})),h=this.waitList.filter((function(t){return t.describe&&t.start_mileage&&t.end_mileage&&t.reasons&&t.remarks}));u=u.map((function(t){var e=Object(c["a"])(t);return delete e.name,e})),h=h.map((function(t){var e=Object(c["a"])(t);return delete e.name,e}));var _={car_id:i,line_name_category_id:n,direction_category_id:r,start_station_id:d,end_station_id:l,video_source:this.currentAdd.path,running_time_data:m,bad_mileage_data:u,unchecked_mileage_data:h,video_start_mileage:a,video_end_mileage:s};this.$debug&&console.log("上传视频form",_),o["a"].sendScan(_).then(this.afterSendScan)},getTracksId:function(t){var e=/\d+/,i=e.exec(t);return i?i[0]:0},afterSendScan:function(t){this.spinning=!1;var e=t.data;this.$debug&&console.log("上传视频",e),1==e.status?(this.step=0,this.modal_video=!1,this.badList=[],this.waitList=[],this.$message.success(this.msg_scan[e.status]),"/work"==this.$route.path&&this.$router.push("/data"),this.$bus.$emit("reload")):this.$message.warn(this.msg_scan[e.status])},getTracks:function(t){return Array.from({length:t.total_tracks},(function(t,e){return 0==e?"正线":"".concat(e,"道")}))},afterStation:function(){var t=this;this.$nextTick((function(){var e=t.form.getFieldsValue(["start_station_id","end_station_id"]);if(e.start_station_id&&e.end_station_id){var i=t.allList.findIndex((function(t){return t.id==e.start_station_id})),a=t.allList.findIndex((function(t){return t.id==e.end_station_id}));t.stationList=t.allList.slice(i,a+1)}}))},getID:function(t,e){return this.base.categories[t][e]},selListItem:function(t,e){this.$set(this.currentItem,t,e)},removeFromList:function(t,e){[this.badList,this.waitList][t].splice(e,1)},pushIntoList:function(t){[this.badList,this.waitList][t].push({name:this.$t("path")+this.handleName(t),describe:"",start_mileage:"",end_mileage:"",reasons:"",remarks:""}),this.$forceUpdate()},handleName:function(t){var e=[this.badList,this.waitList][t];if(0==e.length)return 1;var i=/\d+/;return parseInt(i.exec(e[e.length-1].name))+1},toCancel:function(t){var e=t.target.nodeName;"DIV"!=e&&(0!=this.step&&"BUTTON"==e||(this.modal_video=!1),this.step=0)},toAddFiles:function(){var t=this;this.currentAdd={},o["a"].fileList().then((function(e){var i=e.data;t.$debug&&console.log("文件目录",i),0!=i.status&&1!=i.status||!i.structure.length?t.$message.warn(i.msg||i.status):(t.files=Object(c["a"])(i.structure),t.treeData=t.toTree(i.structure),t.modal_video=!0)}))},toTree:function(t){var e=this,i=[];if(!Array.isArray(t))return i;t.forEach((function(t){t.title=t.item_name,t.key=t.item_id,t.slots={icon:["disk","folder","file","file","file"][t.item_type]},delete t.children,delete t.item_name,delete t.item_id,t.item_type>1&&(e.currentAdd=t)}));var a={};return t.forEach((function(t){a[t.key]=t})),this.treeObj=a,t.forEach((function(t){var e=a[t.parent_id];e?(e.children||(e.children=[])).push(t):i.push(t)})),i},onSelect:function(t){0!=t.length?this.currentAdd=this.treeObj[t]:this.currentAdd=null}},beforeDestroy:function(){this.$bus.$off("addVideoFiles")}},_=h,v=(i("9b52"),i("2877")),p=Object(v["a"])(_,a,s,!1,null,"983f1a32",null),b=p.exports;e["a"]=b},"4f7f":function(t,e,i){t.exports=i("9766")(1097)},"9b52":function(t,e,i){"use strict";i("287c")},f7d9:function(t,e){t.exports={messages:{CN:{add:"添加视频",next:"下一步",scan:"开始识别",cancel:"取消",back:"返回上一步",one:"第一步：上传视频",two:"第二步：填写数据",choose:"请选择视频",selected:"已选中",list:"视频列表",data:"视频数据",date:"检测日期",video_start_mileage:"起始里程",video_end_mileage:"终止里程",number:"出厂编号",work:"工务段",line:"线名",direction:"行别",area:"检测区间",bad:"不良路段",desc:"情况描述",start:"起始里程",end:"终止里程",reason:"原因",remark:"备注",wait:"未检路段",modify:"视频数据可在报告预览页面再次修改",choose2:"请选择视频",empty:"必填项不能为空",none:"该工务段无相关线名",none2:"该线名下无相关行别",none3:"找不到符合范围的检测区间",none4:"检测区间仅有一个站点",path:"路段",scan1:"伤损数据开始检测",scan0:"导入片段失败，片段预填信息有误",scan_1:"提交的参数有误或无参数",scan_2:"未提交视频路径",scan_3:"必填字段缺失，请补齐必填字段",scan_4:"线别提供的字段数据库中缺失",scan_5:"行别提供的字段数据库中缺失",scan_6:"起始车站提供的字段数据库中缺失",scan_7:"终止车站提供的字段数据库中缺失",scan_8:"视频片段已导入，请不要重复提交",scan_9:"无法连接后台服务器（AI识别服务器）",scan_10:"无法导入该视频",scan_11:"导入片段失败，不良/未检/运行时间表数据有误"},HK:{add:"添加視頻",next:"下一步",scan:"開始識別",cancel:"取消",back:"返回上一步",one:"第一步：上傳視頻",two:"第二步：填寫數據",choose:"請選擇視頻",selected:"已選中",list:"視頻列表",data:"視頻數據",date:"檢測日期",video_start_mileage:"起始里程",video_end_mileage:"終止里程",number:"出廠編號",work:"工務段",line:"線名",direction:"行別",area:"檢測區間",bad:"不良路段",desc:"情況描述",start:"起始里程",end:"終止里程",reason:"原因",remark:"備註",wait:"未檢路段",modify:"視頻數據可在報告預覽頁面再次修改",choose2:"請選擇視頻",empty:"必填項不能為空",none:"該工務段無相關線名",none2:"該線名下無相關行別",none3:"找不到符合範圍的檢測區間",none4:"檢測區間僅有一個站點",path:"路段",scan1:"傷損數據開始檢測",scan0:"導入片段失敗，片段預填信息有誤",scan_1:"提交的參數有誤或無參數",scan_2:"未提交視頻路徑",scan_3:"必填字段缺失，請補齊必填字段",scan_4:"線別提供的字段數據庫中缺失",scan_5:"行別提供的字段數據庫中缺失",scan_6:"起始車站提供的字段數據庫中缺失",scan_7:"終止車站提供的字段數據庫中缺失",scan_8:"視頻片段已導入，請不要重複提交",scan_9:"無法連接後台服務器（AI識別服務器）",scan_10:"無法導入該視頻",scan_11:"導入片段失敗，不良/未檢/運行時間表數據有誤"},US:{add:"Add Video",next:"Next",scan:"Start Recognition",cancel:"Cancel",back:"Go back to the previous step",one:"Step 1: Upload Video",two:"Step 2: Fill in the data",choose:"Please choose a video",selected:"Selected",list:"Video List",data:"Video Data",date:"Detection Date",video_start_mileage:"Start Mileage",video_end_mileage:"End Mileage",number:"Factory number",work:"Work Section",line:"Line Name",direction:"Direction",area:"Detection Area",bad:"Bad Road Section",desc:"Description of the situation",start:"Start mileage",end:"End Mileage",reason:"Reason",remark:"Remarks",wait:"Unchecked section",modify:"The video data can be modified again on the report preview page",choose2:"Please choose a video",empty:"Required items cannot be empty",none:"The public works section has no related lines",none2:"There is no related line under this line",none3:"Cannot find a detection interval that meets the range",none4:"There is only one station in the detection interval",path:"Road Section",scan1:"Injury data start detection",scan0:"Failed to import the fragment, the pre-filled information of the fragment is incorrect",scan_1:"The submitted parameters are incorrect or no parameters",scan_2:"Video path not submitted",scan_3:"The required fields are missing, please fill in the required fields",scan_4:"The field provided by the line is missing from the database",scan_5:"The field provided by the line is missing from the database",scan_6:"The field database provided by the starting station is missing",scan_7:"The field database provided by the terminating station is missing",scan_8:"The video clip has been imported, please do not submit repeatedly",scan_9:"Unable to connect to the background server (AI recognition server)",scan_10:"Cannot import this video",scan_11:"Failed to import fragments, bad/unchecked/error in running schedule data"}}}}}]);
//# sourceMappingURL=chunk-144da6b1.9c718c86.js.map